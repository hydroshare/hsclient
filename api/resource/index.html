<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Resource - hsclient</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../../css/ansi-colours.css" rel="stylesheet" />
        <link href="../../css/jupyter-cells.css" rel="stylesheet" />
        <link href="../../css/pandas-dataframe.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Resource";
        var mkdocs_page_input_path = "api\\resource.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> hsclient
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Usage Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Basic_Operations/">Basic Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Aggregation_Operations/">Aggregation Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/File_Operations/">File Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Metadata_Operations/">Metadata Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Aggregation_Data_Object_Operations/">Aggregation Data Object Operations</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Documentation</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >API</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../hydroshare/">HydroShare</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Resource</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../file/">File</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../aggregation/">Aggregation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../netcdf_aggregation/">Multidimensional Aggregation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../geo_feature_aggregation/">Geographic Feature Aggregation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../geo_raster_aggregation/">Geographic Raster Aggregation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../time_series_aggregation/">Time Series Aggregation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../csv/">CSV Aggregation</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Models</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/ResourceMetadata/">Resource</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/SingleFileMetadata/">Single File</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/FileSetMetadata/">File Set</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/GeographicFeatureMetadata/">Geographic Feature</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/GeographicRasterMetadata/">Geographic Raster</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/MultidimensionalMetadata/">Multidimensional</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/ReferencedTimeSeriesMetadata/">Referenced Time Series</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/TimeSeriesMetadata/">Time Series</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/ModelProgramMetadata/">Model Program</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/ModelInstanceMetadata/">Model Instance</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../metadata/CSVFileMetadata/">CSV</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">hsclient</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Developer Documentation</li>
          <li class="breadcrumb-item">API</li>
      <li class="breadcrumb-item active">Resource</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/hydroshare/hsclient/edit/master/docs/api/resource.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-class">



<a id="hsclient.hydroshare.Resource"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="hsclient.hydroshare.Aggregation" href="../aggregation/#hsclient.hydroshare.Aggregation">Aggregation</a></code></p>


        <p>Represents a Resource in HydroShare</p>






              <details class="quote">
                <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
                <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 931 "></span><span class="k">class</span> <span class="nc">Resource</span><span class="p">(</span><span class="n">Aggregation</span><span class="p">):</span>
<span class="linenos" data-linenos=" 932 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a Resource in HydroShare&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 933 "></span>
<span class="linenos" data-linenos=" 934 "></span>    <span class="nd">@property</span>
<span class="linenos" data-linenos=" 935 "></span>    <span class="k">def</span> <span class="nf">_hsapi_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 936 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span><span class="o">.</span><span class="n">path</span>
<span class="linenos" data-linenos=" 937 "></span>        <span class="k">return</span> <span class="s1">&#39;/hsapi&#39;</span> <span class="o">+</span> <span class="n">path</span>
<span class="linenos" data-linenos=" 938 "></span>
<span class="linenos" data-linenos=" 939 "></span>    <span class="k">def</span> <span class="nf">_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">):</span>
<span class="linenos" data-linenos=" 940 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;files&quot;</span><span class="p">,</span> <span class="n">destination_path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>
<span class="linenos" data-linenos=" 941 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)},</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
<span class="linenos" data-linenos=" 942 "></span>
<span class="linenos" data-linenos=" 943 "></span>    <span class="k">def</span> <span class="nf">_delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos=" 944 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;files&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos=" 945 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos=" 946 "></span>
<span class="linenos" data-linenos=" 947 "></span>    <span class="k">def</span> <span class="nf">_download_file_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos=" 948 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_zip</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">save_path</span><span class="p">)</span>
<span class="linenos" data-linenos=" 949 "></span>
<span class="linenos" data-linenos=" 950 "></span>    <span class="k">def</span> <span class="nf">_delete_file_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos=" 951 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos=" 952 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos=" 953 "></span>
<span class="linenos" data-linenos=" 954 "></span>    <span class="c1"># system information</span>
<span class="linenos" data-linenos=" 955 "></span>
<span class="linenos" data-linenos=" 956 "></span>    <span class="nd">@property</span>
<span class="linenos" data-linenos=" 957 "></span>    <span class="k">def</span> <span class="nf">resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos" data-linenos=" 958 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;The resource id (guid) of the HydroShare resource&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 959 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map</span><span class="o">.</span><span class="n">identifier</span>
<span class="linenos" data-linenos=" 960 "></span>
<span class="linenos" data-linenos=" 961 "></span>    <span class="nd">@property</span>
<span class="linenos" data-linenos=" 962 "></span>    <span class="k">def</span> <span class="nf">metadata_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 963 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;The path to the metadata file&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 964 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/data/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos" data-linenos=" 965 "></span>
<span class="linenos" data-linenos=" 966 "></span>    <span class="k">def</span> <span class="nf">system_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 967 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 968 "></span><span class="sd">        The system metadata associated with the HydroShare resource</span>
<span class="linenos" data-linenos=" 969 "></span><span class="sd">        returns: JSON object</span>
<span class="linenos" data-linenos=" 970 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 971 "></span>        <span class="n">hsapi_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s1">&#39;sysmeta&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 972 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hsapi_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos" data-linenos=" 973 "></span>
<span class="linenos" data-linenos=" 974 "></span>    <span class="c1"># access operations</span>
<span class="linenos" data-linenos=" 975 "></span>
<span class="linenos" data-linenos=" 976 "></span>    <span class="k">def</span> <span class="nf">set_sharing_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="linenos" data-linenos=" 977 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 978 "></span><span class="sd">        Set the sharing status of the resource to public or private</span>
<span class="linenos" data-linenos=" 979 "></span><span class="sd">        :param public: bool, set to True for public, False for private</span>
<span class="linenos" data-linenos=" 980 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 981 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="s2">&quot;hsapi&quot;</span><span class="p">,</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span> <span class="s2">&quot;accessRules&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">)</span>
<span class="linenos" data-linenos=" 982 "></span>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;public&#39;</span><span class="p">:</span> <span class="n">public</span><span class="p">}</span>
<span class="linenos" data-linenos=" 983 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="linenos" data-linenos=" 984 "></span>
<span class="linenos" data-linenos=" 985 "></span>    <span class="nd">@property</span>
<span class="linenos" data-linenos=" 986 "></span>    <span class="k">def</span> <span class="nf">access_permission</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 987 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 988 "></span><span class="sd">        Retrieves the access permissions of the resource</span>
<span class="linenos" data-linenos=" 989 "></span><span class="sd">        :return: JSON object</span>
<span class="linenos" data-linenos=" 990 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 991 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;access&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 992 "></span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos=" 993 "></span>        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos" data-linenos=" 994 "></span>
<span class="linenos" data-linenos=" 995 "></span>    <span class="c1"># resource operations</span>
<span class="linenos" data-linenos=" 996 "></span>
<span class="linenos" data-linenos=" 997 "></span>    <span class="k">def</span> <span class="nf">new_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 998 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 999 "></span><span class="sd">        Creates a new version of the resource on HydroShare</span>
<span class="linenos" data-linenos="1000 "></span><span class="sd">        :return: A Resource object of the newly created resource version</span>
<span class="linenos" data-linenos="1001 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1002 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1003 "></span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">202</span><span class="p">)</span>
<span class="linenos" data-linenos="1004 "></span>        <span class="n">resource_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
<span class="linenos" data-linenos="1005 "></span>        <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="s2">&quot;/resource/</span><span class="si">{}</span><span class="s2">/data/resourcemap.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="p">)</span>
<span class="linenos" data-linenos="1006 "></span>
<span class="linenos" data-linenos="1007 "></span>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos="1008 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1009 "></span><span class="sd">        Copies this Resource into a new resource on HydroShare</span>
<span class="linenos" data-linenos="1010 "></span><span class="sd">        returns: A Resource object of the newly copied resource</span>
<span class="linenos" data-linenos="1011 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1012 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;copy&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1013 "></span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">202</span><span class="p">)</span>
<span class="linenos" data-linenos="1014 "></span>        <span class="n">resource_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
<span class="linenos" data-linenos="1015 "></span>        <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="s2">&quot;/resource/</span><span class="si">{}</span><span class="s2">/data/resourcemap.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="p">)</span>
<span class="linenos" data-linenos="1016 "></span>
<span class="linenos" data-linenos="1017 "></span>    <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos" data-linenos="1018 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1019 "></span><span class="sd">        Downloads a zipped bagit archive of the resource from HydroShare</span>
<span class="linenos" data-linenos="1020 "></span><span class="sd">        param save_path: A local path to save the bag to, defaults to the current working directory</span>
<span class="linenos" data-linenos="1021 "></span><span class="sd">        returns: The relative pathname of the download</span>
<span class="linenos" data-linenos="1022 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1023 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_bag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1024 "></span>
<span class="linenos" data-linenos="1025 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1026 "></span>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1027 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1028 "></span><span class="sd">        Deletes the resource on HydroShare</span>
<span class="linenos" data-linenos="1029 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1030 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1031 "></span>        <span class="n">hsapi_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span>
<span class="linenos" data-linenos="1032 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">hsapi_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">204</span><span class="p">)</span>
<span class="linenos" data-linenos="1033 "></span>
<span class="linenos" data-linenos="1034 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1035 "></span>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1036 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1037 "></span><span class="sd">        Saves the metadata to HydroShare</span>
<span class="linenos" data-linenos="1038 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1039 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1040 "></span>        <span class="n">metadata_string</span> <span class="o">=</span> <span class="n">rdf_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_retrieved_metadata</span><span class="p">,</span> <span class="n">rdf_format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1041 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1042 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;resourcemetadata.xml&#39;</span><span class="p">,</span> <span class="n">metadata_string</span><span class="p">)})</span>
<span class="linenos" data-linenos="1043 "></span>
<span class="linenos" data-linenos="1044 "></span>    <span class="c1"># referenced content operations</span>
<span class="linenos" data-linenos="1045 "></span>
<span class="linenos" data-linenos="1046 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1047 "></span>    <span class="k">def</span> <span class="nf">reference_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1048 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1049 "></span><span class="sd">        Creates a HydroShare reference object to reference content outside of the resource</span>
<span class="linenos" data-linenos="1050 "></span><span class="sd">        :param file_name: the file name of the resulting .url file</span>
<span class="linenos" data-linenos="1051 "></span><span class="sd">        :param url: the url of the referenced content</span>
<span class="linenos" data-linenos="1052 "></span><span class="sd">        :param path: the path to create the reference in</span>
<span class="linenos" data-linenos="1053 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1054 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1055 "></span>        <span class="n">request_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;data-store-add-reference&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1056 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1057 "></span>            <span class="n">request_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1058 "></span>            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;res_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;curr_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;ref_name&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;ref_url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">},</span>
<span class="linenos" data-linenos="1059 "></span>            <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="linenos" data-linenos="1060 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1061 "></span>
<span class="linenos" data-linenos="1062 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1063 "></span>    <span class="k">def</span> <span class="nf">reference_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1064 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1065 "></span><span class="sd">        Updates a HydroShare reference object</span>
<span class="linenos" data-linenos="1066 "></span><span class="sd">        :param file_name: the file name for the .url file</span>
<span class="linenos" data-linenos="1067 "></span><span class="sd">        :param url: the url of the referenced content</span>
<span class="linenos" data-linenos="1068 "></span><span class="sd">        :param path: the path to the directory where the reference is located</span>
<span class="linenos" data-linenos="1069 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1070 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1071 "></span>        <span class="n">request_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;data_store_edit_reference_url&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1072 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1073 "></span>            <span class="n">request_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1074 "></span>            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;res_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;curr_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;url_filename&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;new_ref_url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">},</span>
<span class="linenos" data-linenos="1075 "></span>            <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="linenos" data-linenos="1076 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1077 "></span>
<span class="linenos" data-linenos="1078 "></span>    <span class="c1"># file operations</span>
<span class="linenos" data-linenos="1079 "></span>
<span class="linenos" data-linenos="1080 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1081 "></span>    <span class="k">def</span> <span class="nf">folder_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1082 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1083 "></span><span class="sd">        Creates a folder on HydroShare</span>
<span class="linenos" data-linenos="1084 "></span><span class="sd">        :param folder: the folder path to create</span>
<span class="linenos" data-linenos="1085 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1086 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1087 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
<span class="linenos" data-linenos="1088 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
<span class="linenos" data-linenos="1089 "></span>
<span class="linenos" data-linenos="1090 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1091 "></span>    <span class="k">def</span> <span class="nf">folder_rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1092 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1093 "></span><span class="sd">        Renames a folder on HydroShare</span>
<span class="linenos" data-linenos="1094 "></span><span class="sd">        :param path: the path to the folder to rename</span>
<span class="linenos" data-linenos="1095 "></span><span class="sd">        :param new_path: the new path folder name</span>
<span class="linenos" data-linenos="1096 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1097 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1098 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">file_rename</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">new_path</span><span class="o">=</span><span class="n">new_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1099 "></span>
<span class="linenos" data-linenos="1100 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1101 "></span>    <span class="k">def</span> <span class="nf">folder_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1102 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1103 "></span><span class="sd">        Deletes a folder on HydroShare</span>
<span class="linenos" data-linenos="1104 "></span><span class="sd">        :param path: the path to the folder</span>
<span class="linenos" data-linenos="1105 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1106 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1107 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_delete_file_folder</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1108 "></span>
<span class="linenos" data-linenos="1109 "></span>    <span class="k">def</span> <span class="nf">folder_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1110 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1111 "></span><span class="sd">        Downloads a folder from HydroShare</span>
<span class="linenos" data-linenos="1112 "></span><span class="sd">        :param path: The path to folder</span>
<span class="linenos" data-linenos="1113 "></span><span class="sd">        :param save_path: The local path to save the download to, defaults to the current directory</span>
<span class="linenos" data-linenos="1114 "></span><span class="sd">        :return: The path to the download zipped folder</span>
<span class="linenos" data-linenos="1115 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1116 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_zip</span><span class="p">(</span>
<span class="linenos" data-linenos="1117 "></span>            <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;zipped&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1118 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1119 "></span>
<span class="linenos" data-linenos="1120 "></span>    <span class="k">def</span> <span class="nf">file_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">zipped</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="linenos" data-linenos="1121 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1122 "></span><span class="sd">        Downloads a file from HydroShare</span>
<span class="linenos" data-linenos="1123 "></span><span class="sd">        :param path: The path to the file</span>
<span class="linenos" data-linenos="1124 "></span><span class="sd">        :param save_path: The local path to save the file to</span>
<span class="linenos" data-linenos="1125 "></span><span class="sd">        :param zipped: Defaults to False, set to True to download the file zipped</span>
<span class="linenos" data-linenos="1126 "></span><span class="sd">        :return: The path to the downloaded file</span>
<span class="linenos" data-linenos="1127 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1128 "></span>        <span class="k">if</span> <span class="n">zipped</span><span class="p">:</span>
<span class="linenos" data-linenos="1129 "></span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_zip</span><span class="p">(</span>
<span class="linenos" data-linenos="1130 "></span>                <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;zipped&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1131 "></span>            <span class="p">)</span>
<span class="linenos" data-linenos="1132 "></span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1133 "></span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_file</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1134 "></span>
<span class="linenos" data-linenos="1135 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1136 "></span>    <span class="k">def</span> <span class="nf">file_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1137 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1138 "></span><span class="sd">        Delete a file on HydroShare</span>
<span class="linenos" data-linenos="1139 "></span><span class="sd">        :param path: The path to the file</span>
<span class="linenos" data-linenos="1140 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1141 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1142 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_delete_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1143 "></span>
<span class="linenos" data-linenos="1144 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1145 "></span>    <span class="k">def</span> <span class="nf">file_rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1146 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1147 "></span><span class="sd">        Rename a file on HydroShare</span>
<span class="linenos" data-linenos="1148 "></span><span class="sd">        :param path: The path to the file</span>
<span class="linenos" data-linenos="1149 "></span><span class="sd">        :param new_path: the renamed path to the file</span>
<span class="linenos" data-linenos="1150 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1151 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1152 "></span>        <span class="n">rename_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;move-or-rename&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1153 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">rename_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;source_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;target_path&quot;</span><span class="p">:</span> <span class="n">new_path</span><span class="p">})</span>
<span class="linenos" data-linenos="1154 "></span>
<span class="linenos" data-linenos="1155 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1156 "></span>    <span class="k">def</span> <span class="nf">file_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">zip_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">remove_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1157 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1158 "></span><span class="sd">        Zip a file on HydroShare</span>
<span class="linenos" data-linenos="1159 "></span><span class="sd">        :param path: The path to the file</span>
<span class="linenos" data-linenos="1160 "></span><span class="sd">        :param zip_name: The name of the zipped file</span>
<span class="linenos" data-linenos="1161 "></span><span class="sd">        :param remove_file: Defaults to True, set to False to not delete the file that was zipped</span>
<span class="linenos" data-linenos="1162 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1163 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1164 "></span>        <span class="n">zip_name</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.zip&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">zip_name</span> <span class="k">else</span> <span class="n">zip_name</span>
<span class="linenos" data-linenos="1165 "></span>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;input_coll_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;output_zip_file_name&quot;</span><span class="p">:</span> <span class="n">zip_name</span><span class="p">,</span> <span class="s2">&quot;remove_original_after_zip&quot;</span><span class="p">:</span> <span class="n">remove_file</span><span class="p">}</span>
<span class="linenos" data-linenos="1166 "></span>        <span class="n">zip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;zip&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1167 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="linenos" data-linenos="1168 "></span>
<span class="linenos" data-linenos="1169 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1170 "></span>    <span class="k">def</span> <span class="nf">file_unzip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ingest_metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1171 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1172 "></span><span class="sd">        Unzips a file on HydroShare</span>
<span class="linenos" data-linenos="1173 "></span><span class="sd">        :param path: The path to the file to unzip</span>
<span class="linenos" data-linenos="1174 "></span><span class="sd">        :param overwrite: Defaults to True, set to False to unzip the files into a folder with the zip filename</span>
<span class="linenos" data-linenos="1175 "></span><span class="sd">        :param ingest_metadata: Defaults to True, set to False to not ingest HydroShare RDF metadata xml files</span>
<span class="linenos" data-linenos="1176 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1177 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1178 "></span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1179 "></span>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File </span><span class="si">{}</span><span class="s2"> is not a zip, and cannot be unzipped&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<span class="linenos" data-linenos="1180 "></span>        <span class="n">unzip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;unzip&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1181 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1182 "></span>            <span class="n">unzip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;overwrite&quot;</span><span class="p">:</span> <span class="n">overwrite</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">:</span> <span class="n">ingest_metadata</span><span class="p">}</span>
<span class="linenos" data-linenos="1183 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1184 "></span>
<span class="linenos" data-linenos="1185 "></span>    <span class="k">def</span> <span class="nf">file_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">agg_type</span><span class="p">:</span> <span class="n">AggregationType</span><span class="p">,</span> <span class="n">refresh</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="linenos" data-linenos="1186 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1187 "></span><span class="sd">        Aggregate a file to a HydroShare aggregation type.  Aggregating files allows you to specify metadata specific</span>
<span class="linenos" data-linenos="1188 "></span><span class="sd">        to the files associated with the aggregation.  To set a FileSet aggregation, include the path to the folder or</span>
<span class="linenos" data-linenos="1189 "></span><span class="sd">        a file in the folder you would like to create a FileSet aggregation from.</span>
<span class="linenos" data-linenos="1190 "></span><span class="sd">        :param path: The path to the file to aggregate</span>
<span class="linenos" data-linenos="1191 "></span><span class="sd">        :param agg_type: The AggregationType to create</span>
<span class="linenos" data-linenos="1192 "></span><span class="sd">        :param refresh: Defaults True, toggles automatic refreshing of the updated resource in HydroShare</span>
<span class="linenos" data-linenos="1193 "></span><span class="sd">        :return: The newly created Aggregation object if refresh is True</span>
<span class="linenos" data-linenos="1194 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1195 "></span>        <span class="n">type_value</span> <span class="o">=</span> <span class="n">agg_type</span><span class="o">.</span><span class="n">value</span>
<span class="linenos" data-linenos="1196 "></span>        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos" data-linenos="1197 "></span>        <span class="k">if</span> <span class="n">agg_type</span> <span class="o">==</span> <span class="n">AggregationType</span><span class="o">.</span><span class="n">SingleFileAggregation</span><span class="p">:</span>
<span class="linenos" data-linenos="1198 "></span>            <span class="n">type_value</span> <span class="o">=</span> <span class="s1">&#39;SingleFile&#39;</span>
<span class="linenos" data-linenos="1199 "></span>        <span class="k">if</span> <span class="n">agg_type</span> <span class="o">==</span> <span class="n">AggregationType</span><span class="o">.</span><span class="n">FileSetAggregation</span><span class="p">:</span>
<span class="linenos" data-linenos="1200 "></span>            <span class="k">if</span> <span class="s1">&#39;/&#39;</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
<span class="linenos" data-linenos="1201 "></span>                <span class="n">relative_path</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1202 "></span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1203 "></span>                <span class="n">relative_path</span> <span class="o">=</span> <span class="n">path</span>
<span class="linenos" data-linenos="1204 "></span>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;folder_path&quot;</span><span class="p">:</span> <span class="n">relative_path</span><span class="p">}</span>
<span class="linenos" data-linenos="1205 "></span>
<span class="linenos" data-linenos="1206 "></span>        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;set-file-type&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">type_value</span><span class="p">)</span>
<span class="linenos" data-linenos="1207 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="linenos" data-linenos="1208 "></span>        <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
<span class="linenos" data-linenos="1209 "></span>            <span class="c1"># Only return the newly created aggregation if a refresh is requested</span>
<span class="linenos" data-linenos="1210 "></span>            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
<span class="linenos" data-linenos="1211 "></span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aggregation</span><span class="p">(</span><span class="n">file__path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1212 "></span>
<span class="linenos" data-linenos="1213 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1214 "></span>    <span class="k">def</span> <span class="nf">file_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">files</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1215 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1216 "></span><span class="sd">        Uploads files to a folder in HydroShare</span>
<span class="linenos" data-linenos="1217 "></span><span class="sd">        :param *files: The local file paths to upload</span>
<span class="linenos" data-linenos="1218 "></span><span class="sd">        :param destination_path: The path on HydroShare to upload the files to, defaults to the root contents directory</span>
<span class="linenos" data-linenos="1219 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1220 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1221 "></span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos" data-linenos="1222 "></span>            <span class="bp">self</span><span class="o">.</span><span class="n">_upload</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">destination_path</span><span class="o">=</span><span class="n">destination_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1223 "></span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1224 "></span>            <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
<span class="linenos" data-linenos="1225 "></span>                <span class="n">zipped_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;files.zip&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="1226 "></span>                <span class="k">with</span> <span class="n">ZipFile</span><span class="p">(</span><span class="n">zipped_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipped</span><span class="p">:</span>
<span class="linenos" data-linenos="1227 "></span>                    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<span class="linenos" data-linenos="1228 "></span>                        <span class="n">zipped</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
<span class="linenos" data-linenos="1229 "></span>                <span class="bp">self</span><span class="o">.</span><span class="n">_upload</span><span class="p">(</span><span class="n">zipped_file</span><span class="p">,</span> <span class="n">destination_path</span><span class="o">=</span><span class="n">destination_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1230 "></span>                <span class="n">unzip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1231 "></span>                    <span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;unzip&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="s1">&#39;files.zip&#39;</span>
<span class="linenos" data-linenos="1232 "></span>                <span class="p">)</span>
<span class="linenos" data-linenos="1233 "></span>                <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1234 "></span>                    <span class="n">unzip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;overwrite&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1235 "></span>                <span class="p">)</span>
<span class="linenos" data-linenos="1236 "></span>        <span class="c1"># TODO, return those files?</span>
<span class="linenos" data-linenos="1237 "></span>
<span class="linenos" data-linenos="1238 "></span>    <span class="c1"># aggregation operations</span>
<span class="linenos" data-linenos="1239 "></span>
<span class="linenos" data-linenos="1240 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1241 "></span>    <span class="k">def</span> <span class="nf">aggregation_remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1242 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1243 "></span><span class="sd">        Removes an aggregation from HydroShare.  This does not remove the files in the aggregation.</span>
<span class="linenos" data-linenos="1244 "></span><span class="sd">        :param aggregation: The aggregation object to remove</span>
<span class="linenos" data-linenos="1245 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1246 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1247 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1248 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1249 "></span>            <span class="s2">&quot;functions&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1250 "></span>            <span class="s2">&quot;remove-file-type&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1251 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;LogicalFile&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1252 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">main_file_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1253 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1254 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos="1255 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
<span class="linenos" data-linenos="1256 "></span>
<span class="linenos" data-linenos="1257 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1258 "></span>    <span class="k">def</span> <span class="nf">aggregation_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">dst_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1259 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1260 "></span><span class="sd">        Moves an aggregation from its current location to another folder in HydroShare.</span>
<span class="linenos" data-linenos="1261 "></span><span class="sd">        :param aggregation: The aggregation object to move</span>
<span class="linenos" data-linenos="1262 "></span><span class="sd">        :param  dst_path: The target file path to move the aggregation to - target folder must exist</span>
<span class="linenos" data-linenos="1263 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1264 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1265 "></span>        <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1266 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1267 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;LogicalFile&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1268 "></span>            <span class="n">aggregation</span><span class="o">.</span><span class="n">main_file_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1269 "></span>            <span class="s2">&quot;functions&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1270 "></span>            <span class="s2">&quot;move-file-type&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1271 "></span>            <span class="n">dst_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1272 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1273 "></span>        <span class="n">response</span> <span class="o">=</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos="1274 "></span>        <span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos" data-linenos="1275 "></span>        <span class="n">task_id</span> <span class="o">=</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="1276 "></span>        <span class="n">status</span> <span class="o">=</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="1277 "></span>        <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Not ready&quot;</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1278 "></span>            <span class="k">while</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">check_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
<span class="linenos" data-linenos="1279 "></span>                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">CHECK_TASK_PING_INTERVAL</span><span class="p">)</span>
<span class="linenos" data-linenos="1280 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
<span class="linenos" data-linenos="1281 "></span>
<span class="linenos" data-linenos="1282 "></span>    <span class="nd">@refresh</span>
<span class="linenos" data-linenos="1283 "></span>    <span class="k">def</span> <span class="nf">aggregation_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1284 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1285 "></span><span class="sd">        Deletes an aggregation from HydroShare.  This deletes the files and metadata in the aggregation.</span>
<span class="linenos" data-linenos="1286 "></span><span class="sd">        :param aggregation: The aggregation object to delete</span>
<span class="linenos" data-linenos="1287 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1288 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1289 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="linenos" data-linenos="1290 "></span>
<span class="linenos" data-linenos="1291 "></span>    <span class="k">def</span> <span class="nf">aggregation_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">unzip_to</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos" data-linenos="1292 "></span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1293 "></span><span class="sd">        Download an aggregation from HydroShare</span>
<span class="linenos" data-linenos="1294 "></span><span class="sd">        :param aggregation: The aggregation to download</span>
<span class="linenos" data-linenos="1295 "></span><span class="sd">        :param save_path: The local path to save the aggregation to, defaults to the current directory</span>
<span class="linenos" data-linenos="1296 "></span><span class="sd">        :param unzip_to: If set, the resulting download will be unzipped to the specified path</span>
<span class="linenos" data-linenos="1297 "></span><span class="sd">        :return: None</span>
<span class="linenos" data-linenos="1298 "></span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1299 "></span>        <span class="k">return</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_download</span><span class="p">(</span><span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">,</span> <span class="n">unzip_to</span><span class="o">=</span><span class="n">unzip_to</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="hsclient.hydroshare.Resource.access_permission" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">access_permission</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Retrieves the access permissions of the resource
:return: JSON object</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="hsclient.hydroshare.Resource.metadata_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">metadata_file</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>The path to the metadata file</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="hsclient.hydroshare.Resource.resource_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>The resource id (guid) of the HydroShare resource</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.aggregation_delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aggregation_delete</span><span class="p">(</span><span class="n">aggregation</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Deletes an aggregation from HydroShare.  This deletes the files and metadata in the aggregation.
:param aggregation: The aggregation object to delete
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1282 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1283 "></span><span class="k">def</span> <span class="nf">aggregation_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1284 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1285 "></span><span class="sd">    Deletes an aggregation from HydroShare.  This deletes the files and metadata in the aggregation.</span>
<span class="linenos" data-linenos="1286 "></span><span class="sd">    :param aggregation: The aggregation object to delete</span>
<span class="linenos" data-linenos="1287 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1288 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1289 "></span>    <span class="n">aggregation</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.aggregation_download" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aggregation_download</span><span class="p">(</span><span class="n">aggregation</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">unzip_to</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Download an aggregation from HydroShare
:param aggregation: The aggregation to download
:param save_path: The local path to save the aggregation to, defaults to the current directory
:param unzip_to: If set, the resulting download will be unzipped to the specified path
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1291 "></span><span class="k">def</span> <span class="nf">aggregation_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">unzip_to</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos" data-linenos="1292 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1293 "></span><span class="sd">    Download an aggregation from HydroShare</span>
<span class="linenos" data-linenos="1294 "></span><span class="sd">    :param aggregation: The aggregation to download</span>
<span class="linenos" data-linenos="1295 "></span><span class="sd">    :param save_path: The local path to save the aggregation to, defaults to the current directory</span>
<span class="linenos" data-linenos="1296 "></span><span class="sd">    :param unzip_to: If set, the resulting download will be unzipped to the specified path</span>
<span class="linenos" data-linenos="1297 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1298 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1299 "></span>    <span class="k">return</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_download</span><span class="p">(</span><span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">,</span> <span class="n">unzip_to</span><span class="o">=</span><span class="n">unzip_to</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.aggregation_move" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aggregation_move</span><span class="p">(</span><span class="n">aggregation</span><span class="p">,</span> <span class="n">dst_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Moves an aggregation from its current location to another folder in HydroShare.
:param aggregation: The aggregation object to move
:param  dst_path: The target file path to move the aggregation to - target folder must exist
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1257 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1258 "></span><span class="k">def</span> <span class="nf">aggregation_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">dst_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1259 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1260 "></span><span class="sd">    Moves an aggregation from its current location to another folder in HydroShare.</span>
<span class="linenos" data-linenos="1261 "></span><span class="sd">    :param aggregation: The aggregation object to move</span>
<span class="linenos" data-linenos="1262 "></span><span class="sd">    :param  dst_path: The target file path to move the aggregation to - target folder must exist</span>
<span class="linenos" data-linenos="1263 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1264 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1265 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1266 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1267 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;LogicalFile&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1268 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">main_file_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1269 "></span>        <span class="s2">&quot;functions&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1270 "></span>        <span class="s2">&quot;move-file-type&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1271 "></span>        <span class="n">dst_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1272 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="1273 "></span>    <span class="n">response</span> <span class="o">=</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos="1274 "></span>    <span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos" data-linenos="1275 "></span>    <span class="n">task_id</span> <span class="o">=</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="1276 "></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="linenos" data-linenos="1277 "></span>    <span class="k">if</span> <span class="n">status</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Not ready&quot;</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1278 "></span>        <span class="k">while</span> <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">check_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
<span class="linenos" data-linenos="1279 "></span>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">CHECK_TASK_PING_INTERVAL</span><span class="p">)</span>
<span class="linenos" data-linenos="1280 "></span>    <span class="n">aggregation</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.aggregation_remove" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aggregation_remove</span><span class="p">(</span><span class="n">aggregation</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Removes an aggregation from HydroShare.  This does not remove the files in the aggregation.
:param aggregation: The aggregation object to remove
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1240 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1241 "></span><span class="k">def</span> <span class="nf">aggregation_remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1242 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1243 "></span><span class="sd">    Removes an aggregation from HydroShare.  This does not remove the files in the aggregation.</span>
<span class="linenos" data-linenos="1244 "></span><span class="sd">    :param aggregation: The aggregation object to remove</span>
<span class="linenos" data-linenos="1245 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1246 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1247 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1248 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1249 "></span>        <span class="s2">&quot;functions&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1250 "></span>        <span class="s2">&quot;remove-file-type&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1251 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;LogicalFile&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="1252 "></span>        <span class="n">aggregation</span><span class="o">.</span><span class="n">main_file_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1253 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="1254 "></span>    <span class="n">aggregation</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos" data-linenos="1255 "></span>    <span class="n">aggregation</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.copy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">copy</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Copies this Resource into a new resource on HydroShare
returns: A Resource object of the newly copied resource</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1007 "></span><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos="1008 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1009 "></span><span class="sd">    Copies this Resource into a new resource on HydroShare</span>
<span class="linenos" data-linenos="1010 "></span><span class="sd">    returns: A Resource object of the newly copied resource</span>
<span class="linenos" data-linenos="1011 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1012 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;copy&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1013 "></span>    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">202</span><span class="p">)</span>
<span class="linenos" data-linenos="1014 "></span>    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
<span class="linenos" data-linenos="1015 "></span>    <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="s2">&quot;/resource/</span><span class="si">{}</span><span class="s2">/data/resourcemap.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Deletes the resource on HydroShare
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1025 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1026 "></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1027 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1028 "></span><span class="sd">    Deletes the resource on HydroShare</span>
<span class="linenos" data-linenos="1029 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1030 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1031 "></span>    <span class="n">hsapi_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span>
<span class="linenos" data-linenos="1032 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">hsapi_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">204</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.download" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">download</span><span class="p">(</span><span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Downloads a zipped bagit archive of the resource from HydroShare
param save_path: A local path to save the bag to, defaults to the current working directory
returns: The relative pathname of the download</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1017 "></span><span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos" data-linenos="1018 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1019 "></span><span class="sd">    Downloads a zipped bagit archive of the resource from HydroShare</span>
<span class="linenos" data-linenos="1020 "></span><span class="sd">    param save_path: A local path to save the bag to, defaults to the current working directory</span>
<span class="linenos" data-linenos="1021 "></span><span class="sd">    returns: The relative pathname of the download</span>
<span class="linenos" data-linenos="1022 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1023 "></span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_bag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_aggregate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_aggregate</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">agg_type</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Aggregate a file to a HydroShare aggregation type.  Aggregating files allows you to specify metadata specific
to the files associated with the aggregation.  To set a FileSet aggregation, include the path to the folder or
a file in the folder you would like to create a FileSet aggregation from.
:param path: The path to the file to aggregate
:param agg_type: The AggregationType to create
:param refresh: Defaults True, toggles automatic refreshing of the updated resource in HydroShare
:return: The newly created Aggregation object if refresh is True</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1185 "></span><span class="k">def</span> <span class="nf">file_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">agg_type</span><span class="p">:</span> <span class="n">AggregationType</span><span class="p">,</span> <span class="n">refresh</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="linenos" data-linenos="1186 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1187 "></span><span class="sd">    Aggregate a file to a HydroShare aggregation type.  Aggregating files allows you to specify metadata specific</span>
<span class="linenos" data-linenos="1188 "></span><span class="sd">    to the files associated with the aggregation.  To set a FileSet aggregation, include the path to the folder or</span>
<span class="linenos" data-linenos="1189 "></span><span class="sd">    a file in the folder you would like to create a FileSet aggregation from.</span>
<span class="linenos" data-linenos="1190 "></span><span class="sd">    :param path: The path to the file to aggregate</span>
<span class="linenos" data-linenos="1191 "></span><span class="sd">    :param agg_type: The AggregationType to create</span>
<span class="linenos" data-linenos="1192 "></span><span class="sd">    :param refresh: Defaults True, toggles automatic refreshing of the updated resource in HydroShare</span>
<span class="linenos" data-linenos="1193 "></span><span class="sd">    :return: The newly created Aggregation object if refresh is True</span>
<span class="linenos" data-linenos="1194 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1195 "></span>    <span class="n">type_value</span> <span class="o">=</span> <span class="n">agg_type</span><span class="o">.</span><span class="n">value</span>
<span class="linenos" data-linenos="1196 "></span>    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos" data-linenos="1197 "></span>    <span class="k">if</span> <span class="n">agg_type</span> <span class="o">==</span> <span class="n">AggregationType</span><span class="o">.</span><span class="n">SingleFileAggregation</span><span class="p">:</span>
<span class="linenos" data-linenos="1198 "></span>        <span class="n">type_value</span> <span class="o">=</span> <span class="s1">&#39;SingleFile&#39;</span>
<span class="linenos" data-linenos="1199 "></span>    <span class="k">if</span> <span class="n">agg_type</span> <span class="o">==</span> <span class="n">AggregationType</span><span class="o">.</span><span class="n">FileSetAggregation</span><span class="p">:</span>
<span class="linenos" data-linenos="1200 "></span>        <span class="k">if</span> <span class="s1">&#39;/&#39;</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
<span class="linenos" data-linenos="1201 "></span>            <span class="n">relative_path</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1202 "></span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1203 "></span>            <span class="n">relative_path</span> <span class="o">=</span> <span class="n">path</span>
<span class="linenos" data-linenos="1204 "></span>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;folder_path&quot;</span><span class="p">:</span> <span class="n">relative_path</span><span class="p">}</span>
<span class="linenos" data-linenos="1205 "></span>
<span class="linenos" data-linenos="1206 "></span>    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;set-file-type&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">type_value</span><span class="p">)</span>
<span class="linenos" data-linenos="1207 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="linenos" data-linenos="1208 "></span>    <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
<span class="linenos" data-linenos="1209 "></span>        <span class="c1"># Only return the newly created aggregation if a refresh is requested</span>
<span class="linenos" data-linenos="1210 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
<span class="linenos" data-linenos="1211 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">aggregation</span><span class="p">(</span><span class="n">file__path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_delete</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Delete a file on HydroShare
:param path: The path to the file
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1135 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1136 "></span><span class="k">def</span> <span class="nf">file_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1137 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1138 "></span><span class="sd">    Delete a file on HydroShare</span>
<span class="linenos" data-linenos="1139 "></span><span class="sd">    :param path: The path to the file</span>
<span class="linenos" data-linenos="1140 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1141 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1142 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_delete_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_download" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_download</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">zipped</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Downloads a file from HydroShare
:param path: The path to the file
:param save_path: The local path to save the file to
:param zipped: Defaults to False, set to True to download the file zipped
:return: The path to the downloaded file</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1120 "></span><span class="k">def</span> <span class="nf">file_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">zipped</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="linenos" data-linenos="1121 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1122 "></span><span class="sd">    Downloads a file from HydroShare</span>
<span class="linenos" data-linenos="1123 "></span><span class="sd">    :param path: The path to the file</span>
<span class="linenos" data-linenos="1124 "></span><span class="sd">    :param save_path: The local path to save the file to</span>
<span class="linenos" data-linenos="1125 "></span><span class="sd">    :param zipped: Defaults to False, set to True to download the file zipped</span>
<span class="linenos" data-linenos="1126 "></span><span class="sd">    :return: The path to the downloaded file</span>
<span class="linenos" data-linenos="1127 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1128 "></span>    <span class="k">if</span> <span class="n">zipped</span><span class="p">:</span>
<span class="linenos" data-linenos="1129 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_zip</span><span class="p">(</span>
<span class="linenos" data-linenos="1130 "></span>            <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;zipped&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1131 "></span>        <span class="p">)</span>
<span class="linenos" data-linenos="1132 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1133 "></span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_file</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_rename" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_rename</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">new_path</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Rename a file on HydroShare
:param path: The path to the file
:param new_path: the renamed path to the file
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1144 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1145 "></span><span class="k">def</span> <span class="nf">file_rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1146 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1147 "></span><span class="sd">    Rename a file on HydroShare</span>
<span class="linenos" data-linenos="1148 "></span><span class="sd">    :param path: The path to the file</span>
<span class="linenos" data-linenos="1149 "></span><span class="sd">    :param new_path: the renamed path to the file</span>
<span class="linenos" data-linenos="1150 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1151 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1152 "></span>    <span class="n">rename_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;move-or-rename&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1153 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">rename_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;source_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;target_path&quot;</span><span class="p">:</span> <span class="n">new_path</span><span class="p">})</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_unzip" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_unzip</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ingest_metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Unzips a file on HydroShare
:param path: The path to the file to unzip
:param overwrite: Defaults to True, set to False to unzip the files into a folder with the zip filename
:param ingest_metadata: Defaults to True, set to False to not ingest HydroShare RDF metadata xml files
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1169 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1170 "></span><span class="k">def</span> <span class="nf">file_unzip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ingest_metadata</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1171 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1172 "></span><span class="sd">    Unzips a file on HydroShare</span>
<span class="linenos" data-linenos="1173 "></span><span class="sd">    :param path: The path to the file to unzip</span>
<span class="linenos" data-linenos="1174 "></span><span class="sd">    :param overwrite: Defaults to True, set to False to unzip the files into a folder with the zip filename</span>
<span class="linenos" data-linenos="1175 "></span><span class="sd">    :param ingest_metadata: Defaults to True, set to False to not ingest HydroShare RDF metadata xml files</span>
<span class="linenos" data-linenos="1176 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1177 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1178 "></span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1179 "></span>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File </span><span class="si">{}</span><span class="s2"> is not a zip, and cannot be unzipped&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<span class="linenos" data-linenos="1180 "></span>    <span class="n">unzip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;unzip&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="linenos" data-linenos="1181 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1182 "></span>        <span class="n">unzip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;overwrite&quot;</span><span class="p">:</span> <span class="n">overwrite</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">:</span> <span class="n">ingest_metadata</span><span class="p">}</span>
<span class="linenos" data-linenos="1183 "></span>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_upload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_upload</span><span class="p">(</span><span class="o">*</span><span class="n">files</span><span class="p">,</span> <span class="n">destination_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Uploads files to a folder in HydroShare
:param *files: The local file paths to upload
:param destination_path: The path on HydroShare to upload the files to, defaults to the root contents directory
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1213 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1214 "></span><span class="k">def</span> <span class="nf">file_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">files</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1215 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1216 "></span><span class="sd">    Uploads files to a folder in HydroShare</span>
<span class="linenos" data-linenos="1217 "></span><span class="sd">    :param *files: The local file paths to upload</span>
<span class="linenos" data-linenos="1218 "></span><span class="sd">    :param destination_path: The path on HydroShare to upload the files to, defaults to the root contents directory</span>
<span class="linenos" data-linenos="1219 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1220 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1221 "></span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos" data-linenos="1222 "></span>        <span class="bp">self</span><span class="o">.</span><span class="n">_upload</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">destination_path</span><span class="o">=</span><span class="n">destination_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1223 "></span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos" data-linenos="1224 "></span>        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
<span class="linenos" data-linenos="1225 "></span>            <span class="n">zipped_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;files.zip&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="1226 "></span>            <span class="k">with</span> <span class="n">ZipFile</span><span class="p">(</span><span class="n">zipped_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipped</span><span class="p">:</span>
<span class="linenos" data-linenos="1227 "></span>                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<span class="linenos" data-linenos="1228 "></span>                    <span class="n">zipped</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
<span class="linenos" data-linenos="1229 "></span>            <span class="bp">self</span><span class="o">.</span><span class="n">_upload</span><span class="p">(</span><span class="n">zipped_file</span><span class="p">,</span> <span class="n">destination_path</span><span class="o">=</span><span class="n">destination_path</span><span class="p">)</span>
<span class="linenos" data-linenos="1230 "></span>            <span class="n">unzip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span>
<span class="linenos" data-linenos="1231 "></span>                <span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;unzip&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="s1">&#39;files.zip&#39;</span>
<span class="linenos" data-linenos="1232 "></span>            <span class="p">)</span>
<span class="linenos" data-linenos="1233 "></span>            <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1234 "></span>                <span class="n">unzip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;overwrite&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1235 "></span>            <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.file_zip" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_zip</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">zip_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remove_file</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Zip a file on HydroShare
:param path: The path to the file
:param zip_name: The name of the zipped file
:param remove_file: Defaults to True, set to False to not delete the file that was zipped
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1155 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1156 "></span><span class="k">def</span> <span class="nf">file_zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">zip_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">remove_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1157 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1158 "></span><span class="sd">    Zip a file on HydroShare</span>
<span class="linenos" data-linenos="1159 "></span><span class="sd">    :param path: The path to the file</span>
<span class="linenos" data-linenos="1160 "></span><span class="sd">    :param zip_name: The name of the zipped file</span>
<span class="linenos" data-linenos="1161 "></span><span class="sd">    :param remove_file: Defaults to True, set to False to not delete the file that was zipped</span>
<span class="linenos" data-linenos="1162 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1163 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1164 "></span>    <span class="n">zip_name</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.zip&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">zip_name</span> <span class="k">else</span> <span class="n">zip_name</span>
<span class="linenos" data-linenos="1165 "></span>    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;input_coll_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;output_zip_file_name&quot;</span><span class="p">:</span> <span class="n">zip_name</span><span class="p">,</span> <span class="s2">&quot;remove_original_after_zip&quot;</span><span class="p">:</span> <span class="n">remove_file</span><span class="p">}</span>
<span class="linenos" data-linenos="1166 "></span>    <span class="n">zip_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;functions&quot;</span><span class="p">,</span> <span class="s2">&quot;zip&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1167 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.folder_create" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">folder_create</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Creates a folder on HydroShare
:param folder: the folder path to create
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1080 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1081 "></span><span class="k">def</span> <span class="nf">folder_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1082 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1083 "></span><span class="sd">    Creates a folder on HydroShare</span>
<span class="linenos" data-linenos="1084 "></span><span class="sd">    :param folder: the folder path to create</span>
<span class="linenos" data-linenos="1085 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1086 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1087 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
<span class="linenos" data-linenos="1088 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.folder_delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">folder_delete</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Deletes a folder on HydroShare
:param path: the path to the folder
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1100 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1101 "></span><span class="k">def</span> <span class="nf">folder_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1102 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1103 "></span><span class="sd">    Deletes a folder on HydroShare</span>
<span class="linenos" data-linenos="1104 "></span><span class="sd">    :param path: the path to the folder</span>
<span class="linenos" data-linenos="1105 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1106 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1107 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_delete_file_folder</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.folder_download" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">folder_download</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Downloads a folder from HydroShare
:param path: The path to folder
:param save_path: The local path to save the download to, defaults to the current directory
:return: The path to the download zipped folder</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1109 "></span><span class="k">def</span> <span class="nf">folder_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="linenos" data-linenos="1110 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1111 "></span><span class="sd">    Downloads a folder from HydroShare</span>
<span class="linenos" data-linenos="1112 "></span><span class="sd">    :param path: The path to folder</span>
<span class="linenos" data-linenos="1113 "></span><span class="sd">    :param save_path: The local path to save the download to, defaults to the current directory</span>
<span class="linenos" data-linenos="1114 "></span><span class="sd">    :return: The path to the download zipped folder</span>
<span class="linenos" data-linenos="1115 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1116 "></span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">retrieve_zip</span><span class="p">(</span>
<span class="linenos" data-linenos="1117 "></span>        <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resource_path</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;contents&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;zipped&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="1118 "></span>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.folder_rename" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">folder_rename</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">new_path</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Renames a folder on HydroShare
:param path: the path to the folder to rename
:param new_path: the new path folder name
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1090 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1091 "></span><span class="k">def</span> <span class="nf">folder_rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1092 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1093 "></span><span class="sd">    Renames a folder on HydroShare</span>
<span class="linenos" data-linenos="1094 "></span><span class="sd">    :param path: the path to the folder to rename</span>
<span class="linenos" data-linenos="1095 "></span><span class="sd">    :param new_path: the new path folder name</span>
<span class="linenos" data-linenos="1096 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1097 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1098 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">file_rename</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">new_path</span><span class="o">=</span><span class="n">new_path</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.new_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">new_version</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Creates a new version of the resource on HydroShare
:return: A Resource object of the newly created resource version</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 997 "></span><span class="k">def</span> <span class="nf">new_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos=" 998 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 999 "></span><span class="sd">    Creates a new version of the resource on HydroShare</span>
<span class="linenos" data-linenos="1000 "></span><span class="sd">    :return: A Resource object of the newly created resource version</span>
<span class="linenos" data-linenos="1001 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1002 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1003 "></span>    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">202</span><span class="p">)</span>
<span class="linenos" data-linenos="1004 "></span>    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
<span class="linenos" data-linenos="1005 "></span>    <span class="k">return</span> <span class="n">Resource</span><span class="p">(</span><span class="s2">&quot;/resource/</span><span class="si">{}</span><span class="s2">/data/resourcemap.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resource_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.reference_create" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reference_create</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Creates a HydroShare reference object to reference content outside of the resource
:param file_name: the file name of the resulting .url file
:param url: the url of the referenced content
:param path: the path to create the reference in
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1046 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1047 "></span><span class="k">def</span> <span class="nf">reference_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1048 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1049 "></span><span class="sd">    Creates a HydroShare reference object to reference content outside of the resource</span>
<span class="linenos" data-linenos="1050 "></span><span class="sd">    :param file_name: the file name of the resulting .url file</span>
<span class="linenos" data-linenos="1051 "></span><span class="sd">    :param url: the url of the referenced content</span>
<span class="linenos" data-linenos="1052 "></span><span class="sd">    :param path: the path to create the reference in</span>
<span class="linenos" data-linenos="1053 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1054 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1055 "></span>    <span class="n">request_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;data-store-add-reference&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1056 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1057 "></span>        <span class="n">request_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1058 "></span>        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;res_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;curr_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;ref_name&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;ref_url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">},</span>
<span class="linenos" data-linenos="1059 "></span>        <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="linenos" data-linenos="1060 "></span>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.reference_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reference_update</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Updates a HydroShare reference object
:param file_name: the file name for the .url file
:param url: the url of the referenced content
:param path: the path to the directory where the reference is located
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1062 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1063 "></span><span class="k">def</span> <span class="nf">reference_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1064 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1065 "></span><span class="sd">    Updates a HydroShare reference object</span>
<span class="linenos" data-linenos="1066 "></span><span class="sd">    :param file_name: the file name for the .url file</span>
<span class="linenos" data-linenos="1067 "></span><span class="sd">    :param url: the url of the referenced content</span>
<span class="linenos" data-linenos="1068 "></span><span class="sd">    :param path: the path to the directory where the reference is located</span>
<span class="linenos" data-linenos="1069 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1070 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1071 "></span>    <span class="n">request_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;data_store_edit_reference_url&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1072 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos" data-linenos="1073 "></span>        <span class="n">request_path</span><span class="p">,</span>
<span class="linenos" data-linenos="1074 "></span>        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;res_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;curr_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;url_filename&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;new_ref_url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">},</span>
<span class="linenos" data-linenos="1075 "></span>        <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="linenos" data-linenos="1076 "></span>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Saves the metadata to HydroShare
:return: None</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1034 "></span><span class="nd">@refresh</span>
<span class="linenos" data-linenos="1035 "></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos" data-linenos="1036 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1037 "></span><span class="sd">    Saves the metadata to HydroShare</span>
<span class="linenos" data-linenos="1038 "></span><span class="sd">    :return: None</span>
<span class="linenos" data-linenos="1039 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="1040 "></span>    <span class="n">metadata_string</span> <span class="o">=</span> <span class="n">rdf_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_retrieved_metadata</span><span class="p">,</span> <span class="n">rdf_format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1041 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s2">&quot;ingest_metadata&quot;</span><span class="p">)</span>
<span class="linenos" data-linenos="1042 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;resourcemetadata.xml&#39;</span><span class="p">,</span> <span class="n">metadata_string</span><span class="p">)})</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.set_sharing_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_sharing_status</span><span class="p">(</span><span class="n">public</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Set the sharing status of the resource to public or private
:param public: bool, set to True for public, False for private</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="976 "></span><span class="k">def</span> <span class="nf">set_sharing_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="linenos" data-linenos="977 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="978 "></span><span class="sd">    Set the sharing status of the resource to public or private</span>
<span class="linenos" data-linenos="979 "></span><span class="sd">    :param public: bool, set to True for public, False for private</span>
<span class="linenos" data-linenos="980 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="981 "></span>    <span class="n">path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="s2">&quot;hsapi&quot;</span><span class="p">,</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span> <span class="s2">&quot;accessRules&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">)</span>
<span class="linenos" data-linenos="982 "></span>    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;public&#39;</span><span class="p">:</span> <span class="n">public</span><span class="p">}</span>
<span class="linenos" data-linenos="983 "></span>    <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="hsclient.hydroshare.Resource.system_metadata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">system_metadata</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>The system metadata associated with the HydroShare resource
returns: JSON object</p>

            <details class="quote">
              <summary>Source code in <code>hsclient\hydroshare.py</code></summary>
              <div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="966 "></span><span class="k">def</span> <span class="nf">system_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos" data-linenos="967 "></span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="968 "></span><span class="sd">    The system metadata associated with the HydroShare resource</span>
<span class="linenos" data-linenos="969 "></span><span class="sd">    returns: JSON object</span>
<span class="linenos" data-linenos="970 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="971 "></span>    <span class="n">hsapi_path</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hsapi_path</span><span class="p">,</span> <span class="s1">&#39;sysmeta&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="972 "></span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hsapi_path</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../hydroshare/" class="btn btn-neutral float-left" title="HydroShare"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../file/" class="btn btn-neutral float-right" title="File">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/hydroshare/hsclient" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../hydroshare/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../file/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
